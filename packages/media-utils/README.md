# `@mexp/media-utils`

The media utils package provides a set of artifacts to abstract media functionality that may be useful in situations where there is a need to deal with media uploads or with the media library, e.g., artifacts that extend or implement a block-editor.
This package is meant to be used by the WordPress core. It may not work as expected outside WordPress usages.

**Replacement for `@wordpress/media-utils`.**

## API Reference

<!-- START TOKEN(Autogenerated API docs) -->

### Attachment

Undocumented declaration.

### RestAttachment

Undocumented declaration.

### sideloadMedia

Uploads a file to the server without creating an attachment.

_Parameters_

-   _$0_ `SideloadMediaArgs`: Parameters object passed to the function.
-   _$0.file_ `SideloadMediaArgs[ 'file' ]`: Media File to Save.
-   _$0.attachmentId_ `SideloadMediaArgs[ 'attachmentId' ]`: Parent attachment ID.
-   _$0.additionalData_ `SideloadMediaArgs[ 'additionalData' ]`: Additional data to include in the request.
-   _$0.signal_ `SideloadMediaArgs[ 'signal' ]`: Abort signal.
-   _$0.onFileChange_ `SideloadMediaArgs[ 'onFileChange' ]`: 

### transformAttachment

Transforms an attachment object from the REST API shape into the shape expected by the block editor and other consumers.

_Parameters_

-   _attachment_ `RestAttachment`: REST API attachment object.

### uploadMedia

Upload a media file when the file upload button is activated or when adding a file to the editor via drag & drop.

Performs some client-side file processing before eventually uploading the media to WordPress.

Similar to the mediaUpload() function from `@wordpress/editor`.

_Parameters_

-   _$0_ `UploadMediaArgs`: Parameters object passed to the function.
-   _$0.allowedTypes_ `UploadMediaArgs[ 'allowedTypes' ]`: Array with the types of media that can be uploaded, if unset all types are allowed.
-   _$0.additionalData_ `UploadMediaArgs[ 'additionalData' ]`: Additional data to include in the request.
-   _$0.filesList_ `UploadMediaArgs[ 'filesList' ]`: List of files.
-   _$0.maxUploadFileSize_ `UploadMediaArgs[ 'maxUploadFileSize' ]`: Maximum upload size in bytes allowed for the site.
-   _$0.onError_ `UploadMediaArgs[ 'onError' ]`: Function called when an error happens.
-   _$0.onFileChange_ `UploadMediaArgs[ 'onFileChange' ]`: Function called each time a file or a temporary representation of the file is available.
-   _$0.wpAllowedMimeTypes_ `UploadMediaArgs[ 'wpAllowedMimeTypes' ]`: List of allowed mime types and file extensions.
-   _$0.signal_ `UploadMediaArgs[ 'signal' ]`: Abort signal.

### validateFileSize

Verifies whether the file is within the file upload size limits for the site.

_Parameters_

-   _file_ `File`: File object.
-   _maxUploadFileSize_ `number`: Maximum upload size in bytes allowed for the site.

### validateMimeType

Verifies if the caller (e.g. a block) supports this mime type.

_Parameters_

-   _file_ `File`: File object.
-   _allowedTypes_ `string[]`: List of allowed mime types.

### validateMimeTypeForUser

Verifies if the user is allowed to upload this mime type.

_Parameters_

-   _file_ `File`: File object.
-   _wpAllowedMimeTypes_ `Record< string, string > | null`: List of allowed mime types and file extensions.


<!-- END TOKEN(Autogenerated API docs) -->
